(()=>{"use strict";var e={492:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(81),u=l(r(17)),a=n(r(142)),f=l(r(357)),c=l(r(245));function p(e){return"true"===e?.toLowerCase?.()}a.config();const _=parseInt(process.env.LOGGER_LEVEL||"4")||4,d=p(process.env.LOGGER_WRITE_FILE),g=process.env.LOGGER_OUTPUT||"",v=p(process.env.LOGGER_TIME_INCLUDED);class h{constructor(e){this._prefix="Logger",this._prefix=e}error(...e){let t=v?(new Date).toTimeString():"",r=f.default.red(`[ERROR][${this._prefix}]`);console.log.apply(null,[[t,r].join(" "),...e]),this._writefile(t,r,e)}warn(...e){if(_<h.Levels.WARN)return;let t=v?(new Date).toTimeString():"",r=f.default.yellow(`[WARN][${this._prefix}]`);console.log.apply(null,[[t,r].join(" "),...e]),this._writefile(t,r,e)}info(...e){if(_<h.Levels.INFO)return;let t=v?(new Date).toTimeString():"",r=f.default.green(`[INFO][${this._prefix}]`);console.log.apply(null,[[t,r].join(" "),...e]),this._writefile(t,r,e)}debug(...e){if(_<h.Levels.DEBUG)return;let t=v?(new Date).toTimeString():"",r=f.default.blue(`[DEBUG][${this._prefix}]`);console.log.apply(null,[[t,r].join(" "),...e])}_writefile(e,t,r){if(!d)return;const o=`${u.default.join(g,"media-server_"+(0,c.default)().format("yyyyMMDD")+".log")}`;let i=`${e} ${t} - ${r.map((e=>JSON.stringify(e))).join(", ")}`;(0,s.exec)(`echo "${i.replace(/[\\$'"]/g,"\\$&")}" >> ${o}`,((e,t,r)=>{e&&console.log("Write log error:",e.message,r)}))}}h.Levels={ERROR:1,WARN:2,INFO:3,DEBUG:4},t.default=h},357:e=>{e.exports=require("colors")},142:e=>{e.exports=require("dotenv")},245:e=>{e.exports=require("moment")},81:e=>{e.exports=require("child_process")},17:e=>{e.exports=require("path")}},t={};!function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}(492)})();